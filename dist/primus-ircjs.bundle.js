var primusIrcJS=function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e['default']}:function(){return e};return t.d(n,'a',n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p='',t(t.s=3)}([function(e){var t=function(){return this}();try{t=t||Function('return this')()||(1,eval)('this')}catch(n){'object'==typeof window&&(t=window)}e.exports=t},function(e,t,n){function r(e,t){this._id=e,this._clearFn=t}var o=Function.prototype.apply;t.setTimeout=function(){return new r(o.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new r(o.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(5);var s=n(7);t.setImmediate=s.setImmediate,t.clearImmediate=s.clearImmediate},function(e){e.exports={_from:'ircjs@1.1.10',_id:'ircjs@1.1.10',_inBundle:!1,_integrity:'sha512-S2JcOurtWomgFtfj5ug3EtwarLXBGsMYuJeWizPh2baae2Ap43TnO7FQp3WCXyvSxchXpkTFdVeTPD1W66G6JQ==',_location:'/ircjs',_phantomChildren:{},_requested:{type:'version',registry:!0,raw:'ircjs@1.1.10',name:'ircjs',escapedName:'ircjs',rawSpec:'1.1.10',saveSpec:null,fetchSpec:'1.1.10'},_requiredBy:['#USER','/'],_resolved:'https://registry.npmjs.org/ircjs/-/ircjs-1.1.10.tgz',_shasum:'87df2a384738077a5f551284a2e5dcabe844416f',_spec:'ircjs@1.1.10',_where:'/Users/jd/Projects/ircjs/primus-ircjs',author:{name:'Joshua Davison',email:'joshua@davison.asia'},bugs:{url:'https://github.com/ozjd/ircjs/issues'},bundleDependencies:!1,dependencies:{eventemitter3:'^2.0.3'},deprecated:!1,description:'ircJS is a class designed to make it easier to connect and utilise IRC with Javascript',devDependencies:{},homepage:'https://github.com/ozjd/ircjs#readme',keywords:['ircjs','node','irc','bot','ircx','client','chat'],license:'GPL-3.0',main:'irc.js',name:'ircjs',repository:{type:'git',url:'git+https://github.com/ozjd/ircjs.git'},scripts:{},version:'1.1.10'}},function(e,t,n){const r=n(4),o=n(9);e.exports=class extends o{constructor(e,t,n){super(e,t,n),this._transport=new r('https://irc.irc7.com/'),this._setHandlers()}connect(e){super.connect(e),this._transport.open()}send(e){super.send(e),this._transport.write(`${e}\r\n`)}_setHandlers(){super._setHandlers(),this._transport.on('data',(e)=>{this.emit('data',e)}).on('open',()=>{this.emit('connect',this)}).on('error',(e)=>{this.emit('error',e)}).on('end',()=>{this.emit('disconnect')})}}},function(s,a,i){var n=Math.floor;(function(e,o,r){var p,t,t,t,t;!function(c,t,e,r){t[c]=e.call(t);for(var n=0;n<r.length;n++)r[n](t[c]);'undefined'!=typeof s&&s.exports?s.exports=t[c]:i(8)&&(p=function(){return t[c]}.call(a,i,a,s),!(p!==void 0&&(s.exports=p)))}('Primus',this||{},function(){var s,a=function c(d,r,e){function n(i,s){if(!r[i]){if(!d[i]){if(!s&&'function'==typeof t&&t)return t(i,!0);if(o)return o(i,!0);var l=new Error('Cannot find module \''+i+'\'');throw l.code='MODULE_NOT_FOUND',l}var u=r[i]={exports:{}};d[i][0].call(u.exports,function(t){var e=d[i][1][t];return n(e?e:t)},u,u.exports,c,d,r,e)}return r[i].exports}for(var o='function'==typeof t&&t,a=0;a<e.length;a++)n(e[a]);return n}({1:[function(n,t){'use strict';t.exports=function(s,a){function i(n,t){if(a[n]){if('string'==typeof a[n]&&(a[n]=a[n].split(e)),'function'==typeof a[n])return a[n].call(t);for(var p,o,c=0;c<a[n].length;c++)o=a[n][c],p=typeof o,'function'==p?o.call(t):'string'==p&&'function'==typeof t[o]&&t[o]()}}var e=/[, ]+/;return a=a||{},s=s||[],'string'==typeof s&&(s=s.split(e)),function(){var t,e=this,n=0;if(null===e[s[0]])return!1;for(i('before',e);n<s.length;n++)t=s[n],e[t]&&('function'==typeof e[t].destroy&&e[t].destroy(),e[t]=null);return e.emit&&e.emit('destroy'),i('after',e),!0}}},{}],2:[function(n,t){'use strict';t.exports=function(){for(var s,a=this,e=0,t=arguments.length,p=Array(t);t>e;e++)p[e]=arguments[e];return'function'==typeof p[p.length-1]?(s=p.pop(),function(){for(var e=0,t=arguments.length,n=Array(t+1);t>e;e++)n[e+1]=arguments[e];return n[0]=function(e,t){return e?a.emit('error',e):(n=void 0===t?n.slice(1):null===t?[]:t,void a.emit.apply(a,p.concat(n)))},s.apply(a,n),!0}):function(){for(var e=0,t=arguments.length,r=Array(t);t>e;e++)r[e]=arguments[e];return a.emit.apply(a,p.concat(r))}}},{}],3:[function(r,t){'use strict';function d(){}function p(n,t,e){this.fn=n,this.context=t,this.once=e||!1}function n(){this._events=new d,this._eventsCount=0}var o=Object.prototype.hasOwnProperty,m='~';Object.create&&(d.prototype=Object.create(null),new d().__proto__||(m=!1)),n.prototype.eventNames=function(){var n,t,e=[];if(0===this._eventsCount)return e;for(t in n=this._events)o.call(n,t)&&e.push(m?t.slice(1):t);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(n)):e},n.prototype.listeners=function(a,t){var e=m?m+a:a,r=this._events[e];if(t)return!!r;if(!r)return[];if(r.fn)return[r.fn];for(var p=0,o=r.length,i=Array(o);o>p;p++)i[p]=r[p].fn;return i},n.prototype.emit=function(a,t,e,r,n,o){var i=m?m+a:a;if(!this._events[i])return!1;var s,d,u=this._events[i],p=arguments.length;if(u.fn){switch(u.once&&this.removeListener(a,u.fn,void 0,!0),p){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,e),!0;case 4:return u.fn.call(u.context,t,e,r),!0;case 5:return u.fn.call(u.context,t,e,r,n),!0;case 6:return u.fn.call(u.context,t,e,r,n,o),!0;}for(d=1,s=Array(p-1);p>d;d++)s[d-1]=arguments[d];u.fn.apply(u.context,s)}else{var y,f=u.length;for(d=0;f>d;d++)switch(u[d].once&&this.removeListener(a,u[d].fn,void 0,!0),p){case 1:u[d].fn.call(u[d].context);break;case 2:u[d].fn.call(u[d].context,t);break;case 3:u[d].fn.call(u[d].context,t,e);break;case 4:u[d].fn.call(u[d].context,t,e,r);break;default:if(!s)for(y=1,s=Array(p-1);p>y;y++)s[y-1]=arguments[y];u[d].fn.apply(u[d].context,s);}}return!0},n.prototype.on=function(o,t,e){var r=new p(t,e||this),n=m?m+o:o;return this._events[n]?this._events[n].fn?this._events[n]=[this._events[n],r]:this._events[n].push(r):(this._events[n]=r,this._eventsCount++),this},n.prototype.once=function(o,t,e){var r=new p(t,e||this,!0),n=m?m+o:o;return this._events[n]?this._events[n].fn?this._events[n]=[this._events[n],r]:this._events[n].push(r):(this._events[n]=r,this._eventsCount++),this},n.prototype.removeListener=function(n,t,a,r){var o=m?m+n:n;if(!this._events[o])return this;if(!t)return 0==--this._eventsCount?this._events=new d:delete this._events[o],this;var i=this._events[o];if(i.fn)i.fn!==t||r&&!i.once||a&&i.context!==a||(0==--this._eventsCount?this._events=new d:delete this._events[o]);else{for(var s=0,c=[],l=i.length;l>s;s++)(i[s].fn!==t||r&&!i[s].once||a&&i[s].context!==a)&&c.push(i[s]);c.length?this._events[o]=1===c.length?c[0]:c:0==--this._eventsCount?this._events=new d:delete this._events[o]}return this},n.prototype.removeAllListeners=function(n){var t;return n?(t=m?m+n:n,this._events[t]&&(0==--this._eventsCount?this._events=new d:delete this._events[t])):(this._events=new d,this._eventsCount=0),this},n.prototype.off=n.prototype.removeListener,n.prototype.addListener=n.prototype.on,n.prototype.setMaxListeners=function(){return this},n.prefixed=m,n.EventEmitter=n,'undefined'!=typeof t&&(t.exports=n)},{}],4:[function(n,t){t.exports='function'==typeof Object.create?function(n,r){n.super_=r,n.prototype=Object.create(r.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}})}:function(n,t){n.super_=t;var e=function(){};e.prototype=t.prototype,n.prototype=new e,n.prototype.constructor=n}},{}],5:[function(r,t){'use strict';var c=new RegExp('^((?:\\d+)?\\.?\\d+) *('+'milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|wks?|w|years?|yrs?|y'+')?$','i'),n=1e3,o=60*n,i=60*o,s=24*i;t.exports=function(a){var d,e,r=typeof a;if('number'==r)return a;if('string'!=r||'0'===a||!a)return 0;if(+a)return+a;if(1e4<a.length||!(e=c.exec(a)))return 0;switch(d=parseFloat(e[1]),e[2].toLowerCase()){case'years':case'year':case'yrs':case'yr':case'y':return d*(365*s);case'weeks':case'week':case'wks':case'wk':case'w':return d*(7*s);case'days':case'day':case'd':return d*s;case'hours':case'hour':case'hrs':case'hr':case'h':return d*i;case'minutes':case'minute':case'mins':case'min':case'm':return d*o;case'seconds':case'second':case'secs':case'sec':case's':return d*n;default:return d;}}},{}],6:[function(n,t){'use strict';t.exports=function(o){function t(){return r?e:(r=1,e=o.apply(this,arguments),o=null,e)}var e,r=0;return t.displayName=o.displayName||o.name||t.displayName||t.name,t}},{}],7:[function(o,t,e){'use strict';function a(e){return decodeURIComponent(e.replace(/\+/g,' '))}var i=Object.prototype.hasOwnProperty;e.stringify=function(o,t){t=t||'';var s=[];for(var r in'string'!=typeof t&&(t='?'),o)i.call(o,r)&&s.push(encodeURIComponent(r)+'='+encodeURIComponent(o[r]));return s.length?t+s.join('&'):''},e.parse=function(n){for(var t,e=/([^=?&]+)=?([^&]*)/g,r={};t=e.exec(n);r[a(t[1])]=a(t[2]));return r}},{}],8:[function(r,t){'use strict';function p(s,t,e){return o(s in e?e[s]:s in t?t[s]:n[s])}function n(r){var t=this;return t instanceof n?(r=r||{},t.attempt=null,t._fn=null,t['reconnect timeout']=p('reconnect timeout',t,r),t.retries=p('retries',t,r),t.factor=p('factor',t,r),t.max=p('max',t,r),t.min=p('min',t,r),void(t.timers=new a(t))):new n(r)}var e=r('eventemitter3'),o=r('millisecond'),s=r('demolish'),a=r('tick-tock'),i=r('one-time');n.prototype=new e,n.prototype.constructor=n,n['reconnect timeout']='30 seconds',n.max=1/0,n.min='500 ms',n.retries=10,n.factor=2,n.prototype.reconnect=function(){var n=this;return n.backoff(function(t,e){return e.duration=+new Date-e.start,t?n.emit('reconnect failed',t,e):void n.emit('reconnected',e)},n.attempt)},n.prototype.backoff=function(o,s){var e=this;return s=s||e.attempt||{},s.backoff?e:(s['reconnect timeout']=p('reconnect timeout',e,s),s.retries=p('retries',e,s),s.factor=p('factor',e,s),s.max=p('max',e,s),s.min=p('min',e,s),s.start=+s.start||+new Date,s.duration=+s.duration||0,s.attempt=+s.attempt||0,s.attempt===s.retries?(o.call(e,new Error('Unable to recover'),s),e):(s.backoff=!0,s.attempt++,e.attempt=s,s.scheduled=1===s.attempt?s.min:Math.min(Math.round((Math.random()+1)*s.min*Math.pow(s.factor,s.attempt-1)),s.max),e.timers.setTimeout('reconnect',function(){s.duration=+new Date-s.start,s.backoff=!1,e.timers.clear('reconnect, timeout');var r=e._fn=i(function(t){return e.reset(),t?e.backoff(o,s):void o.call(e,void 0,s)});e.emit('reconnect',s,r),e.timers.setTimeout('timeout',function(){var n=new Error('Failed to reconnect in a timely manner');s.duration=+new Date-s.start,e.emit('reconnect timeout',n,s),r(n)},s['reconnect timeout'])},s.scheduled),e.emit('reconnect scheduled',s),e))},n.prototype.reconnecting=function(){return!!this.attempt},n.prototype.reconnected=function(e){return this._fn&&this._fn(e),this},n.prototype.reset=function(){return this._fn=this.attempt=null,this.timers.clear('reconnect, timeout'),this},n.prototype.destroy=s('timers attempt _fn'),t.exports=n},{demolish:1,eventemitter3:9,millisecond:5,"one-time":6,"tick-tock":11}],9:[function(r,t){'use strict';function a(n,t,e){this.fn=n,this.context=t,this.once=e||!1}function n(){}var d='function'!=typeof Object.create&&'~';n.prototype._events=void 0,n.prototype.listeners=function(i,t){var e=d?d+i:i,r=this._events&&this._events[e];if(t)return!!r;if(!r)return[];if(r.fn)return[r.fn];for(var p=0,o=r.length,s=Array(o);o>p;p++)s[p]=r[p].fn;return s},n.prototype.emit=function(i,t,e,r,n,o){var s=d?d+i:i;if(!this._events||!this._events[s])return!1;var a,m,u=this._events[s],p=arguments.length;if('function'==typeof u.fn){switch(u.once&&this.removeListener(i,u.fn,void 0,!0),p){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,e),!0;case 4:return u.fn.call(u.context,t,e,r),!0;case 5:return u.fn.call(u.context,t,e,r,n),!0;case 6:return u.fn.call(u.context,t,e,r,n,o),!0;}for(m=1,a=Array(p-1);p>m;m++)a[m-1]=arguments[m];u.fn.apply(u.context,a)}else{var y,f=u.length;for(m=0;f>m;m++)switch(u[m].once&&this.removeListener(i,u[m].fn,void 0,!0),p){case 1:u[m].fn.call(u[m].context);break;case 2:u[m].fn.call(u[m].context,t);break;case 3:u[m].fn.call(u[m].context,t,e);break;default:if(!a)for(y=1,a=Array(p-1);p>y;y++)a[y-1]=arguments[y];u[m].fn.apply(u[m].context,a);}}return!0},n.prototype.on=function(n,t,e){var r=new a(t,e||this),o=d?d+n:n;return this._events||(this._events=d?{}:Object.create(null)),this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],r]:this._events[o].push(r):this._events[o]=r,this},n.prototype.once=function(n,t,e){var r=new a(t,e||this,!0),o=d?d+n:n;return this._events||(this._events=d?{}:Object.create(null)),this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],r]:this._events[o].push(r):this._events[o]=r,this},n.prototype.removeListener=function(i,t,e,r){var n=d?d+i:i;if(!this._events||!this._events[n])return this;var o=this._events[n],s=[];if(t)if(o.fn)(o.fn!==t||r&&!o.once||e&&o.context!==e)&&s.push(o);else for(var a=0,p=o.length;p>a;a++)(o[a].fn!==t||r&&!o[a].once||e&&o[a].context!==e)&&s.push(o[a]);return s.length?this._events[n]=1===s.length?s[0]:s:delete this._events[n],this},n.prototype.removeAllListeners=function(e){return this._events?(e?delete this._events[d?d+e:e]:this._events=d?{}:Object.create(null),this):this},n.prototype.off=n.prototype.removeListener,n.prototype.addListener=n.prototype.on,n.prototype.setMaxListeners=function(){return this},n.prefixed=d,'undefined'!=typeof t&&(t.exports=n)},{}],10:[function(n,t){'use strict';t.exports=function(n,r){if(r=r.split(':')[0],n=+n,!n)return!1;return'http'===r||'ws'===r?80!==n:'https'===r||'wss'===r?443!==n:'ftp'===r?21!==n:'gopher'===r?70!==n:'file'!=r&&0!==n}},{}],11:[function(r,t){'use strict';function p(o,t,e,r){this.start=+new Date,this.duration=e,this.clear=t,this.timer=o,this.fns=[r]}function n(e){clearTimeout(e)}function d(e){clearInterval(e)}function i(n){e(n)}function s(e){return this instanceof s?(this.timers={},void(this.context=e||this)):new s(e)}var a=Object.prototype.hasOwnProperty,c=r('millisecond');p.prototype.remaining=function(){return this.duration-this.taken()},p.prototype.taken=function(){return+new Date-this.start},s.prototype.tock=function(a,t){var e=this;return function(){if(a in e.timers){var r=e.timers[a],n=r.fns.slice(),o=n.length,i=0;for(t?e.clear(a):e.start=+new Date;o>i;i++)n[i].call(e.context)}}},s.prototype.setTimeout=function(o,t,e){var r,a=this;return a.timers[o]?(a.timers[o].fns.push(t),a):(r=c(e),a.timers[o]=new p(setTimeout(a.tock(o,!0),c(e)),n,r,t),a)},s.prototype.setInterval=function(n,t,e){var r,o=this;return o.timers[n]?(o.timers[n].fns.push(t),o):(r=c(e),o.timers[n]=new p(setInterval(o.tock(n),c(e)),d,r,t),o)},s.prototype.setImmediate=function(n,t){var e=this;return'function'==typeof o?e.timers[n]?(e.timers[n].fns.push(t),e):(e.timers[n]=new p(o(e.tock(n,!0)),i,0,t),e):e.setTimeout(n,t,0)},s.prototype.active=function(e){return e in this.timers},s.prototype.clear=function(){var s,t,e,r=arguments.length?arguments:[],n=this;if(1===r.length&&'string'==typeof r[0]&&(r=r[0].split(/[, ]+/)),!r.length)for(s in n.timers)a.call(n.timers,s)&&r.push(s);for(t=0,e=r.length;e>t;t++)s=n.timers[r[t]],s&&(s.clear(s.timer),s.fns=s.timer=s.clear=null,delete n.timers[r[t]]);return n},s.prototype.adjust=function(a,t){var e,i=this,n=c(t),o=i.timers[a];return o?(e=o.clear===d,o.clear(o.timer),o.start=+new Date,o.duration=n,o.timer=(e?setInterval:setTimeout)(i.tock(a,!e),n),i):i},s.prototype.end=s.prototype.destroy=function(){return!!this.context&&(this.clear(),this.context=this.timers=null,!0)},s.Timer=p,t.exports=s},{millisecond:5}],12:[function(a,t){(function(c){'use strict';function b(r){r=r||c.location||{};var s,e={},a=typeof r;if('blob:'===r.protocol)e=new i(unescape(r.pathname),{});else if('string'==a)for(s in e=new i(r,{}),l)delete e[s];else if('object'==a){for(s in r)s in l||(e[s]=r[s]);void 0===e.slashes&&(e.slashes=p.test(r.href))}return e}function n(n){var t=r.exec(n);return{protocol:t[1]?t[1].toLowerCase():'',slashes:!!t[2],rest:t[3]}}function o(a,t){for(var e=(t||'/').split('/').slice(0,-1).concat(a.split('/')),r=e.length,n=e[r-1],o=!1,p=0;r--;)'.'===e[r]?e.splice(r,1):'..'===e[r]?(e.splice(r,1),p++):p&&(0===r&&(o=!0),e.splice(r,1),p--);return o&&e.unshift(''),('.'===n||'..'===n)&&e.push(''),e.join('/')}function i(p,t,l){if(!(this instanceof i))return new i(p,t,l);var _,a,c,k,f,d,y=x.slice(),m=typeof t,v=this,g=0;for('object'!=m&&'string'!=m&&(l=t,t=null),l&&'function'!=typeof l&&(l=u.parse),t=b(t),a=n(p||''),_=!a.protocol&&!a.slashes,v.slashes=a.slashes||_&&t.slashes,v.protocol=a.protocol||t.protocol||'',p=a.rest,a.slashes||(y[2]=[/(.*)/,'pathname']);g<y.length;g++)k=y[g],c=k[0],d=k[1],c===c?'string'==typeof c?~(f=p.indexOf(c))&&('number'==typeof k[2]?(v[d]=p.slice(0,f),p=p.slice(f+k[2])):(v[d]=p.slice(f),p=p.slice(0,f))):(f=c.exec(p))&&(v[d]=f[1],p=p.slice(0,f.index)):v[d]=p,v[d]=v[d]||(_&&k[3]?t[d]||'':''),k[4]&&(v[d]=v[d].toLowerCase());l&&(v.query=l(v.query)),_&&t.slashes&&'/'!==v.pathname.charAt(0)&&(''!==v.pathname||''!==t.pathname)&&(v.pathname=o(v.pathname,t.pathname)),s(v.port,v.protocol)||(v.host=v.hostname,v.port=''),v.username=v.password='',v.auth&&(k=v.auth.split(':'),v.username=k[0]||'',v.password=k[1]||''),v.origin=v.protocol&&v.host&&'file:'!==v.protocol?v.protocol+'//'+v.host:'null',v.href=v.toString()}var s=a('requires-port'),u=a('querystringify'),r=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,p=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,x=[['#','hash'],['?','query'],['/','pathname'],['@','auth',1],[NaN,'host',void 0,1,1],[/:(\d+)$/,'port',void 0,1],[NaN,'hostname',void 0,1,1]],l={hash:1,query:1};i.prototype={set:function(a,t,p){var c=this;'query'===a?('string'==typeof t&&t.length&&(t=(p||u.parse)(t)),c[a]=t):'port'===a?(c[a]=t,s(t,c.protocol)?t&&(c.host=c.hostname+':'+t):(c.host=c.hostname,c[a]='')):'hostname'===a?(c[a]=t,c.port&&(t+=':'+c.port),c.host=t):'host'===a?(c[a]=t,/:\d+$/.test(t)?(t=t.split(':'),c.port=t.pop(),c.hostname=t.join(':')):(c.hostname=t,c.port='')):'protocol'===a?(c.protocol=t.toLowerCase(),c.slashes=!p):'pathname'===a?c.pathname=t.length&&'/'!==t.charAt(0)?'/'+t:t:c[a]=t;for(var n,i=0;i<x.length;i++)n=x[i],n[4]&&(c[n[1]]=c[n[1]].toLowerCase());return c.origin=c.protocol&&c.host&&'file:'!==c.protocol?c.protocol+'//'+c.host:'null',c.href=c.toString(),c},toString:function(s){s&&'function'==typeof s||(s=u.stringify);var a,e=this,r=e.protocol;r&&':'!==r.charAt(r.length-1)&&(r+=':');var n=r+(e.slashes?'//':'');return e.username&&(n+=e.username,e.password&&(n+=':'+e.password),n+='@'),n+=e.host+e.pathname,a='object'==typeof e.query?s(e.query):e.query,a&&(n+='?'===a.charAt(0)?a:'?'+a),e.hash&&(n+=e.hash),n}},i.extractProtocol=n,i.location=b,i.qs=u,t.exports=i}).call(this,'undefined'==typeof r?'undefined'==typeof self?'undefined'==typeof window?{}:window:self:r)},{querystringify:7,"requires-port":10}],13:[function(r,t){'use strict';function e(r){var t='';do t=s[r%a]+t,r=n(r/a);while(0<r);return t}function o(){var n=e(+new Date);return n===i?n+'.'+e(d++):(d=0,i=n)}for(var i,s=['0','1','2','3','4','5','6','7','8','9','A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z','a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z','-','_'],a=64,c={},d=0,p=0;a>p;p++)c[s[p]]=p;o.encode=e,o.decode=function(n){var t=0;for(p=0;p<n.length;p++)t=t*a+c[n.charAt(p)];return t},t.exports=o},{}],14:[function(n,m){'use strict';function r(n,t){if(!(n instanceof b)){var e=new Error('Primus#'+t+'\'s context should called with a Primus instance');if('function'!=typeof n.listeners||!n.listeners('error').length)throw e;n.emit('error',e)}}function b(n,s){if(!(this instanceof b))return new b(n,s);if(b.Stream.call(this),'function'!=typeof this.client)return this.critical(new Error('The client library has not been compiled correctly, see https://github.com/primus/primus#client-library for more details'));if('object'==typeof n?(s=n,n=s.url||s.uri||o):s=s||{},'ping'in s||'pong'in s)return this.critical(new Error('The `ping` and `pong` options have been removed'));var e=this;s.queueSize='queueSize'in s?s.queueSize:1/0,s.timeout='timeout'in s?s.timeout:1e4,s.reconnect='reconnect'in s?s.reconnect:{},s.pingTimeout='pingTimeout'in s?s.pingTimeout:45e3,s.strategy='strategy'in s?s.strategy:[],s.transport='transport'in s?s.transport:{},e.buffer=[],e.writable=!0,e.readable=!0,e.url=e.parse(n||o),e.readyState=b.CLOSED,e.options=s,e.timers=new a(this),e.socket=null,e.latency=0,e.disconnect=!1,e.transport=s.transport,e.transformers={outgoing:[],incoming:[]},e.recovery=new c(s.reconnect),'string'==typeof s.strategy&&(s.strategy=s.strategy.split(/\s?\,\s?/g)),!1===s.strategy?s.strategy=[]:s.strategy.length||(s.strategy.push('disconnect','online'),this.authorization||s.strategy.push('timeout')),s.strategy=s.strategy.join(',').toLowerCase(),'websockets'in s&&(e.AVOID_WEBSOCKETS=!s.websockets),'network'in s&&(e.NETWORK_EVENTS=s.network),s.manual||e.timers.setTimeout('open',function(){e.timers.clear('open'),e.open()},0),e.initialise(s)}var o,i=n('eventemitter3'),a=n('tick-tock'),c=n('recovery'),u=n('querystringify'),p=n('inherits'),h=n('demolish'),f=n('yeast'),l=/\u2028/g,d=/\u2029/g;try{o=location.origin?location.origin:location.protocol+'//'+location.host}catch(e){o='http://127.0.0.1'}b.requires=b.require=function(o){return'function'==typeof n?'function'==typeof s&&s.amd?void 0:n(o):void 0};try{b.Stream=b.requires('stream')}catch(e){}b.Stream||(b.Stream=i),p(b,b.Stream),b.OPENING=1,b.CLOSED=2,b.OPEN=3,b.prototype.AVOID_WEBSOCKETS=!1,b.prototype.NETWORK_EVENTS=!1,b.prototype.online=!0;try{(b.prototype.NETWORK_EVENTS='onLine'in navigator&&(window.addEventListener||document.body.attachEvent))&&(navigator.onLine||(b.prototype.online=!1))}catch(e){}if(b.prototype.ark={},b.prototype.emits=n('emits'),b.prototype.plugin=function(n){if(r(this,'plugin'),n)return this.ark[n];var t={};for(n in this.ark)t[n]=this.ark[n];return t},b.prototype.reserved=function(e){return /^(incoming|outgoing)::/.test(e)||e in this.reserved.events},b.prototype.reserved.events={"reconnect scheduled":1,"reconnect timeout":1,readyStateChange:1,"reconnect failed":1,reconnected:1,reconnect:1,offline:1,timeout:1,destroy:1,online:1,error:1,close:1,open:1,data:1,end:1},b.prototype.initialise=function(o){var s,a=this;for(var e in a.recovery.on('reconnected',a.emits('reconnected')).on('reconnect failed',a.emits('reconnect failed',function(e){a.emit('end'),e()})).on('reconnect timeout',a.emits('reconnect timeout')).on('reconnect scheduled',a.emits('reconnect scheduled')).on('reconnect',a.emits('reconnect',function(e){a.emit('outgoing::reconnect'),e()})),a.on('outgoing::open',function(){var e=a.readyState;a.readyState=b.OPENING,e!==a.readyState&&a.emit('readyStateChange','opening'),s=+new Date}),a.on('incoming::open',function(){var r=a.readyState;if(a.recovery.reconnecting()&&a.recovery.reconnected(),a.writable=!0,a.readable=!0,a.online||(a.online=!0,a.emit('online')),a.readyState=b.OPEN,r!==a.readyState&&a.emit('readyStateChange','open'),a.heartbeat(),a.buffer.length){var t=a.buffer.slice(),e=t.length,n=0;for(a.buffer.length=0;e>n;n++)a._write(t[n])}a.emit('open')}),a.on('incoming::ping',function(e){a.online=!0,a.heartbeat(),a.emit('outgoing::pong',e),a._write('primus::pong::'+e)}),a.on('incoming::error',function(r){var s=a.timers.active('connect'),e=r;if('string'==typeof r)e=new Error(r);else if(!(r instanceof Error)&&'object'==typeof r)for(var n in e=new Error(r.message||r.reason),r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n]);return a.recovery.reconnecting()?a.recovery.reconnected(e):(a.listeners('error').length&&a.emit('error',e),void(s&&(~a.options.strategy.indexOf('timeout')?a.recovery.reconnect():a.end())))}),a.on('incoming::data',function(r){a.decoder(r,function(t,e){return t?a.listeners('error').length&&a.emit('error',t):void(a.protocol(e)||a.transforms(a,a,'incoming',e,r))})}),a.on('incoming::end',function(){var e=a.readyState;return a.disconnect?(a.disconnect=!1,a.end()):(a.readyState=b.CLOSED,e!==a.readyState&&a.emit('readyStateChange','end'),a.timers.active('connect')&&a.end(),e===b.OPEN?(this.writable=!1,this.readable=!1,this.timers.clear(),a.emit('close'),~a.options.strategy.indexOf('disconnect')?a.recovery.reconnect():(a.emit('outgoing::end'),void a.emit('end'))):!!a.recovery.reconnecting()&&a.recovery.reconnect())}),a.client(),a.ark)a.ark[e].call(a,a,o);return a.NETWORK_EVENTS?(a.offlineHandler=function(){a.online&&(a.online=!1,a.emit('offline'),a.end(),a.recovery.reset())},a.onlineHandler=function(){a.online||(a.online=!0,a.emit('online'),~a.options.strategy.indexOf('online')&&a.recovery.reconnect())},window.addEventListener?(window.addEventListener('offline',a.offlineHandler,!1),window.addEventListener('online',a.onlineHandler,!1)):document.body.attachEvent&&(document.body.attachEvent('onoffline',a.offlineHandler),document.body.attachEvent('ononline',a.onlineHandler)),a):a},b.prototype.protocol=function(n){if('string'!=typeof n||0!==n.indexOf('primus::'))return!1;var o=n.indexOf(':',8),e=n.slice(o+2);switch(n.slice(8,o)){case'ping':this.emit('incoming::ping',+e);break;case'server':'close'===e&&(this.disconnect=!0);break;case'id':this.emit('incoming::id',e);break;default:return!1;}return!0},b.prototype.transforms=function(a,p,e,t,r){var o={data:t},i=a.transformers[e];return function e(s,t){var r=i[s++];return r?1===r.length?!1===r.call(p,o)?void 0:e(s,t):void r.call(p,o,function(r,n){return r?p.emit('error',r):void(!1!==n&&e(s,t))}):t()}(0,function(){return'incoming'===e?p.emit('data',o.data,r):void p._write(o.data)}),this},b.prototype.id=function(e){return this.socket&&this.socket.id?e(this.socket.id):(this._write('primus::id::'),this.once('incoming::id',e))},b.prototype.open=function(){return r(this,'open'),!this.recovery.reconnecting()&&this.options.timeout&&this.timeout(),this.emit('outgoing::open'),this},b.prototype.write=function(e){return r(this,'write'),this.transforms(this,this,'outgoing',e),!0},b.prototype._write=function(n){var o=this;return b.OPEN===o.readyState?(o.encoder(n,function(e,t){return e?o.listeners('error').length&&o.emit('error',e):('string'==typeof t&&(~t.indexOf('\u2028')&&(t=t.replace(l,'\\u2028')),~t.indexOf('\u2029')&&(t=t.replace(d,'\\u2029'))),void o.emit('outgoing::data',t))}),!0):(this.buffer.length===this.options.queueSize&&this.buffer.splice(0,1),this.buffer.push(n),!1)},b.prototype.heartbeat=function(){return this.options.pingTimeout?(this.timers.clear('heartbeat'),this.timers.setTimeout('heartbeat',function(){this.online&&(this.online=!1,this.emit('offline'),this.emit('incoming::end'))},this.options.pingTimeout),this):this},b.prototype.timeout=function(){function n(){t.removeListener('error',n).removeListener('open',n).removeListener('end',n).timers.clear('connect')}var t=this;return t.timers.setTimeout('connect',function(){n(),t.readyState===b.OPEN||t.recovery.reconnecting()||(t.emit('timeout'),~t.options.strategy.indexOf('timeout')?t.recovery.reconnect():t.end())},t.options.timeout),t.on('error',n).on('open',n).on('end',n)},b.prototype.end=function(n){if(r(this,'end'),this.readyState===b.CLOSED&&!this.timers.active('connect')&&!this.timers.active('open'))return this.recovery.reconnecting()&&(this.recovery.reset(),this.emit('end')),this;void 0!==n&&this.write(n),this.writable=!1,this.readable=!1;var t=this.readyState;return this.readyState=b.CLOSED,t!==this.readyState&&this.emit('readyStateChange','end'),this.timers.clear(),this.emit('outgoing::end'),this.emit('close'),this.emit('end'),this},b.prototype.destroy=h('url timers options recovery socket transport transformers',{before:'end',after:['removeAllListeners',function(){this.NETWORK_EVENTS&&(window.addEventListener?(window.removeEventListener('offline',this.offlineHandler),window.removeEventListener('online',this.onlineHandler)):document.body.attachEvent&&(document.body.detachEvent('onoffline',this.offlineHandler),document.body.detachEvent('ononline',this.onlineHandler)))}]}),b.prototype.clone=function(e){return this.merge({},e)},b.prototype.merge=function(o){for(var t,e,r=1;r<arguments.length;r++)for(t in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,t)&&(o[t]=e[t]);return o},b.prototype.parse=n('url-parse'),b.prototype.querystring=u.parse,b.prototype.querystringify=u.stringify,b.prototype.uri=function(s){var t=this.url,e=[],r=!1;s.query&&(r=!0),s=s||{},s.protocol='protocol'in s?s.protocol:'http:',s.query=t.query&&r&&t.query.slice(1),s.secure='secure'in s?s.secure:'https:'===t.protocol||'wss:'===t.protocol,s.auth='auth'in s?s.auth:t.auth,s.pathname='pathname'in s?s.pathname:this.pathname,s.port='port'in s?+s.port:+t.port||(s.secure?443:80);var n=this.querystring(s.query||'');return n._primuscb=f(),s.query=this.querystringify(n),this.emit('outgoing::url',s),e.push(s.secure?s.protocol.replace(':','s:'):s.protocol,''),e.push(s.auth?s.auth+'@'+t.host:t.host),s.pathname&&e.push(s.pathname.slice(1)),r?e[e.length-1]+='?'+s.query:delete s.query,s.object?s:e.join('/')},b.prototype.transform=function(n,t){return r(this,'transform'),n in this.transformers?(this.transformers[n].push(t),this):this.critical(new Error('Invalid transformer type'))},b.prototype.critical=function(e){if(this.emit('error',e))return this;throw e},b.connect=function(n,t){return new b(n,t)},b.EventEmitter=i,b.prototype.client=function(){var i,t=this.emits('incoming::data'),e=this.emits('incoming::error'),r=this.emits('incoming::open'),n=this.emits('incoming::end'),o=this,s=function(){if('undefined'!=typeof eio)return eio;try{return b.requires('engine.io-client')}catch(e){}}();return s?(o.on('outgoing::open',function(){o.emit('outgoing::end'),o.socket=i=s(o.merge(o.transport,o.url,o.uri({protocol:'http:',query:!0,object:!0}),{rememberUpgrade:!1,forceBase64:!0,enablesXDR:!1,timestampRequests:!0,path:this.pathname,transports:o.AVOID_WEBSOCKETS?['polling']:['polling','websocket']})),s.sockets&&s.sockets.length&&(s.sockets.length=0),i.on('message',t),i.on('error',e),i.on('close',n),i.on('open',r)}),o.on('outgoing::data',function(t){i&&i.send(t)}),o.on('outgoing::reconnect',function(){o.emit('outgoing::open')}),void o.on('outgoing::end',function(){i&&(i.removeListener('message',t),i.removeListener('error',e),i.removeListener('close',n),i.removeListener('open',r),i.close(),i=null)})):o.critical(new Error('Missing required `engine.io-client` module. Please run `npm install --save engine.io-client`'))},b.prototype.authorization=!1,b.prototype.pathname='/primus',b.prototype.encoder=function(n,t){var e;try{n=JSON.stringify(n)}catch(t){e=t}t(e,n)},b.prototype.decoder=function(n,o){var e;if('string'!=typeof n)return o(e,n);try{n=JSON.parse(n)}catch(t){e=t}o(e,n)},b.prototype.version='7.0.2','undefined'!=typeof document&&'undefined'!=typeof navigator){document.addEventListener&&document.addEventListener('keydown',function(e){27===e.keyCode&&e.preventDefault&&e.preventDefault()},!1);var y=(navigator.userAgent||'').toLowerCase(),v=y.match(/.+(?:rv|it|ra|ie)[\/: ](\d+)\.(\d+)(?:\.(\d+))?/)||[],g=+[v[1],v[2]].join('.');!~y.indexOf('chrome')&&~y.indexOf('safari')&&534.54>g&&(b.prototype.AVOID_WEBSOCKETS=!0)}m.exports=b},{demolish:1,emits:2,eventemitter3:3,inherits:4,querystringify:7,recovery:8,"tick-tock":11,"url-parse":12,yeast:13}]},{},[14])(14);return a},[function(){!function(n){var t;'undefined'==typeof window?'undefined'!=typeof self&&(t=self):t=window,t.eio=n()}(function(){var f=String.fromCharCode;return function c(d,e,r){function n(i,s){if(!e[i]){if(!d[i]){if(!s&&'function'==typeof t&&t)return t(i,!0);if(o)return o(i,!0);var l=new Error('Cannot find module \''+i+'\'');throw l.code='MODULE_NOT_FOUND',l}var u=e[i]={exports:{}};d[i][0].call(u.exports,function(e){var t=d[i][1][e];return n(t?t:e)},u,u.exports,c,d,e,r)}return e[i].exports}for(var o='function'==typeof t&&t,a=0;a<r.length;a++)n(r[a]);return n}({1:[function(n,t){t.exports=n('./socket'),t.exports.parser=n('engine.io-parser')},{"./socket":2,"engine.io-parser":16}],2:[function(d,t){(function(l){function m(s,a){if(!(this instanceof m))return new m(s,a);a=a||{},s&&'object'==typeof s&&(a=s,s=null),s?(s=n(s),a.hostname=s.host,a.secure='https'===s.protocol||'wss'===s.protocol,a.port=s.port,s.query&&(a.query=s.query)):a.host&&(a.hostname=n(a.host).host),this.secure=null==a.secure?l.location&&'https:'===location.protocol:a.secure,a.hostname&&!a.port&&(a.port=this.secure?'443':'80'),this.agent=a.agent||!1,this.hostname=a.hostname||(l.location?location.hostname:'localhost'),this.port=a.port||(l.location&&location.port?location.port:this.secure?443:80),this.query=a.query||{},'string'==typeof this.query&&(this.query=p.decode(this.query)),this.upgrade=!1!==a.upgrade,this.path=(a.path||'/engine.io').replace(/\/$/,'')+'/',this.forceJSONP=!!a.forceJSONP,this.jsonp=!1!==a.jsonp,this.forceBase64=!!a.forceBase64,this.enablesXDR=!!a.enablesXDR,this.timestampParam=a.timestampParam||'t',this.timestampRequests=a.timestampRequests,this.transports=a.transports||['polling','websocket'],this.transportOptions=a.transportOptions||{},this.readyState='',this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=a.policyPort||843,this.rememberUpgrade=a.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=a.onlyBinaryUpgrades,this.perMessageDeflate=!1!==a.perMessageDeflate&&(a.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=a.pfx||null,this.key=a.key||null,this.passphrase=a.passphrase||null,this.cert=a.cert||null,this.ca=a.ca||null,this.ciphers=a.ciphers||null,this.rejectUnauthorized=!(void 0!==a.rejectUnauthorized)||a.rejectUnauthorized,this.forceNode=!!a.forceNode;var e='object'==typeof l&&l;e.global===e&&(a.extraHeaders&&0<Object.keys(a.extraHeaders).length&&(this.extraHeaders=a.extraHeaders),a.localAddress&&(this.localAddress=a.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}function f(n){var t={};for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e]);return t}var o=d('./transports/index'),e=d('component-emitter'),s=d('indexof'),a=d('engine.io-parser'),n=d('parseuri'),i=d('parsejson'),p=d('parseqs');t.exports=m,m.priorWebsocketSuccess=!1,e(m.prototype),m.protocol=a.protocol,m.Socket=m,m.Transport=d('./transport'),m.transports=d('./transports/index'),m.parser=d('engine.io-parser'),m.prototype.createTransport=function(s){var t=f(this.query);t.EIO=a.protocol,t.transport=s;var i=this.transportOptions[s]||{};this.id&&(t.sid=this.id);var r=new o[s]({query:t,socket:this,agent:i.agent||this.agent,hostname:i.hostname||this.hostname,port:i.port||this.port,secure:i.secure||this.secure,path:i.path||this.path,forceJSONP:i.forceJSONP||this.forceJSONP,jsonp:i.jsonp||this.jsonp,forceBase64:i.forceBase64||this.forceBase64,enablesXDR:i.enablesXDR||this.enablesXDR,timestampRequests:i.timestampRequests||this.timestampRequests,timestampParam:i.timestampParam||this.timestampParam,policyPort:i.policyPort||this.policyPort,pfx:i.pfx||this.pfx,key:i.key||this.key,passphrase:i.passphrase||this.passphrase,cert:i.cert||this.cert,ca:i.ca||this.ca,ciphers:i.ciphers||this.ciphers,rejectUnauthorized:i.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:i.perMessageDeflate||this.perMessageDeflate,extraHeaders:i.extraHeaders||this.extraHeaders,forceNode:i.forceNode||this.forceNode,localAddress:i.localAddress||this.localAddress,requestTimeout:i.requestTimeout||this.requestTimeout,protocols:i.protocols||void 0});return r},m.prototype.open=function(){var n;if(this.rememberUpgrade&&m.priorWebsocketSuccess&&-1!==this.transports.indexOf('websocket'))n='websocket';else{if(0===this.transports.length){var t=this;return void setTimeout(function(){t.emit('error','No transports available')},0)}n=this.transports[0]}this.readyState='opening';try{n=this.createTransport(n)}catch(e){return this.transports.shift(),void this.open()}n.open(),this.setTransport(n)},m.prototype.setTransport=function(n){var r=this;this.transport&&this.transport.removeAllListeners(),this.transport=n,n.on('drain',function(){r.onDrain()}).on('packet',function(e){r.onPacket(e)}).on('error',function(e){r.onError(e)}).on('close',function(){r.onClose('transport close')})},m.prototype.probe=function(n){function t(){if(l.onlyBinaryUpgrades){var e=!this.supportsBinary&&l.transport.supportsBinary;c=c||e}c||(i.send([{type:'ping',data:'probe'}]),i.once('packet',function(n){if(!c)if('pong'===n.type&&'probe'===n.data){if(l.upgrading=!0,l.emit('upgrading',i),!i)return;m.priorWebsocketSuccess='websocket'===i.name,l.transport.pause(function(){c||'closed'!==l.readyState&&(a(),l.setTransport(i),i.send([{type:'upgrade'}]),l.emit('upgrade',i),i=null,l.upgrading=!1,l.flush())})}else{var t=new Error('probe error');t.transport=i.name,l.emit('upgradeError',t)}}))}function d(){c||(c=!0,a(),i.close(),i=null)}function e(n){var t=new Error('probe error: '+n);t.transport=i.name,d(),l.emit('upgradeError',t)}function r(){e('transport closed')}function o(){e('socket closed')}function s(e){i&&e.name!==i.name&&d()}function a(){i.removeListener('open',t),i.removeListener('error',e),i.removeListener('close',r),l.removeListener('close',o),l.removeListener('upgrading',s)}var i=this.createTransport(n,{probe:1}),c=!1,l=this;m.priorWebsocketSuccess=!1,i.once('open',t),i.once('error',e),i.once('close',r),this.once('close',o),this.once('upgrading',s),i.open()},m.prototype.onOpen=function(){if(this.readyState='open',m.priorWebsocketSuccess='websocket'===this.transport.name,this.emit('open'),this.flush(),'open'===this.readyState&&this.upgrade&&this.transport.pause)for(var n=0,t=this.upgrades.length;t>n;n++)this.probe(this.upgrades[n])},m.prototype.onPacket=function(n){if('opening'===this.readyState||'open'===this.readyState||'closing'===this.readyState)switch(this.emit('packet',n),this.emit('heartbeat'),n.type){case'open':this.onHandshake(i(n.data));break;case'pong':this.setPing(),this.emit('pong');break;case'error':var t=new Error('server error');t.code=n.data,this.onError(t);break;case'message':this.emit('data',n.data),this.emit('message',n.data);}},m.prototype.onHandshake=function(e){this.emit('handshake',e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),'closed'!==this.readyState&&(this.setPing(),this.removeListener('heartbeat',this.onHeartbeat),this.on('heartbeat',this.onHeartbeat))},m.prototype.onHeartbeat=function(n){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){'closed'!==t.readyState&&t.onClose('ping timeout')},n||t.pingInterval+t.pingTimeout)},m.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout(function(){e.ping(),e.onHeartbeat(e.pingTimeout)},e.pingInterval)},m.prototype.ping=function(){var e=this;this.sendPacket('ping',function(){e.emit('ping')})},m.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit('drain'):this.flush()},m.prototype.flush=function(){'closed'!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit('flush'))},m.prototype.write=m.prototype.send=function(n,t,e){return this.sendPacket('message',n,t,e),this},m.prototype.sendPacket=function(s,a,i,p){if('function'==typeof a&&(p=a,a=void 0),'function'==typeof i&&(p=i,i=null),'closing'!==this.readyState&&'closed'!==this.readyState){i=i||{},i.compress=!1!==i.compress;var n={type:s,data:a,options:i};this.emit('packetCreate',n),this.writeBuffer.push(n),p&&this.once('flush',p),this.flush()}},m.prototype.close=function(){function o(){r.onClose('forced close'),r.transport.close()}function t(){r.removeListener('upgrade',t),r.removeListener('upgradeError',t),o()}function e(){r.once('upgrade',t),r.once('upgradeError',t)}if('opening'===this.readyState||'open'===this.readyState){this.readyState='closing';var r=this;this.writeBuffer.length?this.once('drain',function(){this.upgrading?e():o()}):this.upgrading?e():o()}return this},m.prototype.onError=function(e){m.priorWebsocketSuccess=!1,this.emit('error',e),this.onClose('transport error',e)},m.prototype.onClose=function(n,t){if('opening'===this.readyState||'open'===this.readyState||'closing'===this.readyState){var e=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners('close'),this.transport.close(),this.transport.removeAllListeners(),this.readyState='closed',this.id=null,this.emit('close',n,t),e.writeBuffer=[],e.prevBufferLen=0}},m.prototype.filterUpgrades=function(o){for(var t=[],e=0,r=o.length;r>e;e++)~s(this.transports,o[e])&&t.push(o[e]);return t}}).call(this,'undefined'==typeof self?'undefined'==typeof window?{}:window:self)},{"./transport":3,"./transports/index":4,"component-emitter":14,"engine.io-parser":16,indexof:21,parsejson:23,parseqs:24,parseuri:25}],3:[function(r,t){function e(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState='',this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.forceNode=e.forceNode,this.extraHeaders=e.extraHeaders,this.localAddress=e.localAddress}var n=r('engine.io-parser'),o=r('component-emitter');t.exports=e,o(e.prototype),e.prototype.onError=function(n,t){var e=new Error(n);return e.type='TransportError',e.description=t,this.emit('error',e),this},e.prototype.open=function(){return('closed'===this.readyState||''===this.readyState)&&(this.readyState='opening',this.doOpen()),this},e.prototype.close=function(){return('opening'===this.readyState||'open'===this.readyState)&&(this.doClose(),this.onClose()),this},e.prototype.send=function(e){if('open'!==this.readyState)throw new Error('Transport not open');this.write(e)},e.prototype.onOpen=function(){this.readyState='open',this.writable=!0,this.emit('open')},e.prototype.onData=function(r){var t=n.decodePacket(r,this.socket.binaryType);this.onPacket(t)},e.prototype.onPacket=function(e){this.emit('packet',e)},e.prototype.onClose=function(){this.readyState='closed',this.emit('close')}},{"component-emitter":14,"engine.io-parser":16}],4:[function(n,t,p){(function(d){var e=n('xmlhttprequest-ssl'),o=n('./polling-xhr'),i=n('./polling-jsonp'),t=n('./websocket');p.polling=function(s){var t,r=!1,n=!1,a=!1!==s.jsonp;if(d.location){var l='https:'===location.protocol,u=location.port;u||(u=l?443:80),r=s.hostname!==location.hostname||u!==s.port,n=s.secure!==l}if(s.xdomain=r,s.xscheme=n,t=new e(s),'open'in t&&!s.forceJSONP)return new o(s);if(!a)throw new Error('JSONP disabled');return new i(s)},p.websocket=t}).call(this,'undefined'==typeof self?'undefined'==typeof window?{}:window:self)},{"./polling-jsonp":5,"./polling-xhr":6,"./websocket":8,"xmlhttprequest-ssl":9}],5:[function(p,t){(function(d){function r(){}function e(o){n.call(this,o),this.query=this.query||{},s||(d.___eio||(d.___eio=[]),s=d.___eio),this.index=s.length;var a=this;s.push(function(e){a.onData(e)}),this.query.j=this.index,d.document&&d.addEventListener&&d.addEventListener('beforeunload',function(){a.script&&(a.script.onerror=r)},!1)}var n=p('./polling'),o=p('component-inherit');t.exports=e;var s,l=/\n/g,c=/\\n/g;o(e,n),e.prototype.supportsBinary=!1,e.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),n.prototype.doClose.call(this)},e.prototype.doPoll=function(){var o=this,t=document.createElement('script');this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){o.onError('jsonp poll error',t)};var e=document.getElementsByTagName('script')[0];e?e.parentNode.insertBefore(t,e):(document.head||document.body).appendChild(t),this.script=t;var r='undefined'!=typeof navigator&&/gecko/i.test(navigator.userAgent);r&&setTimeout(function(){var e=document.createElement('iframe');document.body.appendChild(e),document.body.removeChild(e)},100)},e.prototype.doWrite=function(d,t){function e(){r(),t()}function r(){if(n.iframe)try{n.form.removeChild(n.iframe)}catch(e){n.onError('jsonp polling iframe removal error',e)}try{var t='<iframe src="javascript:0" name="'+n.iframeId+'">';o=document.createElement(t)}catch(e){o=document.createElement('iframe'),o.name=n.iframeId,o.src='javascript:0'}o.id=n.iframeId,n.form.appendChild(o),n.iframe=o}var n=this;if(!this.form){var o,i=document.createElement('form'),s=document.createElement('textarea'),a=this.iframeId='eio_iframe_'+this.index;i.className='socketio',i.style.position='absolute',i.style.top='-1000px',i.style.left='-1000px',i.target=a,i.method='POST',i.setAttribute('accept-charset','utf-8'),s.name='d',i.appendChild(s),document.body.appendChild(i),this.form=i,this.area=s}this.form.action=this.uri(),r(),d=d.replace(c,'\\\n'),this.area.value=d.replace(l,'\\n');try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){'complete'===n.iframe.readyState&&e()}:this.iframe.onload=e}}).call(this,'undefined'==typeof self?'undefined'==typeof window?{}:window:self)},{"./polling":7,"component-inherit":15}],6:[function(d,t){(function(l){function e(){}function n(r){if(a.call(this,r),this.requestTimeout=r.requestTimeout,this.extraHeaders=r.extraHeaders,l.location){var t='https:'===location.protocol,e=location.port;e||(e=t?443:80),this.xd=r.hostname!==l.location.hostname||e!==r.port,this.xs=r.secure!==t}}function r(e){this.method=e.method||'GET',this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0===e.data?null:e.data,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.requestTimeout=e.requestTimeout,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders,this.create()}function o(){for(var e in r.requests)r.requests.hasOwnProperty(e)&&r.requests[e].abort()}var s=d('xmlhttprequest-ssl'),a=d('./polling'),i=d('component-emitter'),c=d('component-inherit');t.exports=n,t.exports.Request=r,c(n,a),n.prototype.supportsBinary=!0,n.prototype.request=function(e){return e=e||{},e.uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,e.requestTimeout=this.requestTimeout,e.extraHeaders=this.extraHeaders,new r(e)},n.prototype.doWrite=function(r,s){var e=this.request({method:'POST',data:r,isBinary:'string'!=typeof r&&void 0!==r}),n=this;e.on('success',s),e.on('error',function(e){n.onError('xhr post error',e)}),this.sendXhr=e},n.prototype.doPoll=function(){var n=this.request(),r=this;n.on('data',function(e){r.onData(e)}),n.on('error',function(e){r.onError('xhr poll error',e)}),this.pollXhr=n},i(r.prototype),r.prototype.create=function(){var a={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized},t=this.xhr=new s(a),e=this;try{t.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var n in t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(n)&&t.setRequestHeader(n,this.extraHeaders[n])}catch(e){}if(this.supportsBinary&&(t.responseType='arraybuffer'),'POST'===this.method)try{this.isBinary?t.setRequestHeader('Content-type','application/octet-stream'):t.setRequestHeader('Content-type','text/plain;charset=UTF-8')}catch(e){}try{t.setRequestHeader('Accept','*/*')}catch(e){}'withCredentials'in t&&(t.withCredentials=!0),this.requestTimeout&&(t.timeout=this.requestTimeout),this.hasXDR()?(t.onload=function(){e.onLoad()},t.onerror=function(){e.onError(t.responseText)}):t.onreadystatechange=function(){4===t.readyState&&(200===t.status||1223===t.status?e.onLoad():setTimeout(function(){e.onError(t.status)},0))},t.send(this.data)}catch(t){return void setTimeout(function(){e.onError(t)},0)}l.document&&(this.index=r.requestsCount++,r.requests[this.index]=this)},r.prototype.onSuccess=function(){this.emit('success'),this.cleanup()},r.prototype.onData=function(e){this.emit('data',e),this.onSuccess()},r.prototype.onError=function(e){this.emit('error',e),this.cleanup(!0)},r.prototype.cleanup=function(n){if('undefined'!=typeof this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=e:this.xhr.onreadystatechange=e,n)try{this.xhr.abort()}catch(t){}l.document&&delete r.requests[this.index],this.xhr=null}},r.prototype.onLoad=function(){var r;try{var t;try{t=this.xhr.getResponseHeader('Content-Type').split(';')[0]}catch(e){}if('application/octet-stream'===t)r=this.xhr.response||this.xhr.responseText;else if(this.supportsBinary)try{r=f.apply(null,new Uint8Array(this.xhr.response))}catch(t){for(var e=new Uint8Array(this.xhr.response),n=[],o=0,a=e.length;a>o;o++)n.push(e[o]);r=f.apply(null,n)}else r=this.xhr.responseText}catch(e){this.onError(e)}null!=r&&this.onData(r)},r.prototype.hasXDR=function(){return'undefined'!=typeof l.XDomainRequest&&!this.xs&&this.enablesXDR},r.prototype.abort=function(){this.cleanup()},r.requestsCount=0,r.requests={},l.document&&(l.attachEvent?l.attachEvent('onunload',o):l.addEventListener&&l.addEventListener('beforeunload',o,!1))}).call(this,'undefined'==typeof self?'undefined'==typeof window?{}:window:self)},{"./polling":7,"component-emitter":14,"component-inherit":15,"xmlhttprequest-ssl":9}],7:[function(p,t){function e(r){var t=r&&r.forceBase64;(!a||t)&&(this.supportsBinary=!1),n.call(this,r)}var n=p('../transport'),o=p('parseqs'),i=p('engine.io-parser'),r=p('component-inherit'),s=p('yeast');t.exports=e;var a=function(){var t=p('xmlhttprequest-ssl'),e=new t({xdomain:!1});return null!=e.responseType}();r(e,n),e.prototype.name='polling',e.prototype.doOpen=function(){this.poll()},e.prototype.pause=function(o){function t(){e.readyState='paused',o()}var e=this;if(this.readyState='pausing',this.polling||!this.writable){var r=0;this.polling&&(r++,this.once('pollComplete',function(){--r||t()})),this.writable||(r++,this.once('drain',function(){--r||t()}))}else t()},e.prototype.poll=function(){this.polling=!0,this.doPoll(),this.emit('poll')},e.prototype.onData=function(n){var r=this;i.decodePayload(n,this.socket.binaryType,this.supportsBinary,function(e){return'opening'===r.readyState&&r.onOpen(),'close'===e.type?(r.onClose(),!1):void r.onPacket(e)}),'closed'!==this.readyState&&(this.polling=!1,this.emit('pollComplete'),'open'===this.readyState&&this.poll())},e.prototype.doClose=function(){function n(){t.write([{type:'close'}])}var t=this;'open'===this.readyState?n():this.once('open',n)},e.prototype.write=function(n){var o=this;this.writable=!1;var e=function(){o.writable=!0,o.emit('drain')};i.encodePayload(n,this.supportsBinary,function(n){o.doWrite(n,e)})},e.prototype.uri=function(){var a=this.query||{},t=this.secure?'https':'http',e='';!1!==this.timestampRequests&&(a[this.timestampParam]=s()),this.supportsBinary||a.sid||(a.b64=1),a=o.encode(a),this.port&&('https'==t&&443!==+this.port||'http'==t&&80!==+this.port)&&(e=':'+this.port),a.length&&(a='?'+a);var r=-1!==this.hostname.indexOf(':');return t+'://'+(r?'['+this.hostname+']':this.hostname)+e+this.path+a}},{"../transport":3,"component-inherit":15,"engine.io-parser":16,parseqs:24,"xmlhttprequest-ssl":9,yeast:26}],8:[function(d,t){(function(e){function r(r){var t=r&&r.forceBase64;t&&(this.supportsBinary=!1),this.perMessageDeflate=r.perMessageDeflate,this.usingBrowserWebSocket=l&&!r.forceNode,this.protocols=r.protocols,this.usingBrowserWebSocket||(p=n),o.call(this,r)}var n,o=d('../transport'),i=d('engine.io-parser'),s=d('parseqs'),a=d('component-inherit'),c=d('yeast'),l=e.WebSocket||e.MozWebSocket;if('undefined'==typeof window)try{n=d('ws')}catch(e){}var p=l;p||'undefined'!=typeof window||(p=n),t.exports=r,a(r,o),r.prototype.name='websocket',r.prototype.supportsBinary=!0,r.prototype.doOpen=function(){if(this.check()){var n=this.uri(),t=this.protocols,e={agent:this.agent,perMessageDeflate:this.perMessageDeflate};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(e.headers=this.extraHeaders),this.localAddress&&(e.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket?t?new p(n,t):new p(n):new p(n,t,e)}catch(e){return this.emit('error',e)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType='nodebuffer'):this.ws.binaryType='arraybuffer',this.addEventListeners()}},r.prototype.addEventListeners=function(){var n=this;this.ws.onopen=function(){n.onOpen()},this.ws.onclose=function(){n.onClose()},this.ws.onmessage=function(t){n.onData(t.data)},this.ws.onerror=function(t){n.onError('websocket error',t)}},r.prototype.write=function(r){function p(){c.emit('flush'),setTimeout(function(){c.writable=!0,c.emit('drain')},0)}var c=this;this.writable=!1;for(var n=r.length,t=0,o=n;o>t;t++)!function(r){i.encodePacket(r,c.supportsBinary,function(t){if(!c.usingBrowserWebSocket){var o={};if(r.options&&(o.compress=r.options.compress),c.perMessageDeflate){var s='string'==typeof t?e.Buffer.byteLength(t):t.length;s<c.perMessageDeflate.threshold&&(o.compress=!1)}}try{c.usingBrowserWebSocket?c.ws.send(t):c.ws.send(t,o)}catch(e){}--n||p()})}(r[t])},r.prototype.onClose=function(){o.prototype.onClose.call(this)},r.prototype.doClose=function(){'undefined'!=typeof this.ws&&this.ws.close()},r.prototype.uri=function(){var o=this.query||{},t=this.secure?'wss':'ws',e='';this.port&&('wss'==t&&443!==+this.port||'ws'==t&&80!==+this.port)&&(e=':'+this.port),this.timestampRequests&&(o[this.timestampParam]=c()),this.supportsBinary||(o.b64=1),o=s.encode(o),o.length&&(o='?'+o);var r=-1!==this.hostname.indexOf(':');return t+'://'+(r?'['+this.hostname+']':this.hostname)+e+this.path+o},r.prototype.check=function(){return p&&(!('__initialize'in p)||this.name!==r.prototype.name)}}).call(this,'undefined'==typeof self?'undefined'==typeof window?{}:window:self)},{"../transport":3,"component-inherit":15,"engine.io-parser":16,parseqs:24,ws:void 0,yeast:26}],9:[function(o,t){(function(e){var r=o('has-cors');t.exports=function(n){var t=n.xdomain,s=n.xscheme,a=n.enablesXDR;try{if('undefined'!=typeof XMLHttpRequest&&(!t||r))return new XMLHttpRequest}catch(e){}try{if('undefined'!=typeof XDomainRequest&&!s&&a)return new XDomainRequest}catch(e){}if(!t)try{return new e[['Active'].concat('Object').join('X')]('Microsoft.XMLHTTP')}catch(e){}}}).call(this,'undefined'==typeof self?'undefined'==typeof window?{}:window:self)},{"has-cors":20}],10:[function(n,t){function s(){}t.exports=function(o,a,e){function r(s,t){if(0>=r.count)throw new Error('after called too many times');--r.count,s?(n=!0,a(s),a=e):0!==r.count||n||a(null,t)}var n=!1;return e=e||s,r.count=o,0===o?a():r}},{}],11:[function(n,t){t.exports=function(p,t,e){var r=p.byteLength;if(t=t||0,e=e||r,p.slice)return p.slice(t,e);if(0>t&&(t+=r),0>e&&(e+=r),e>r&&(e=r),t>=r||t>=e||0===r)return new ArrayBuffer(0);for(var n=new Uint8Array(p),o=new Uint8Array(e-t),i=t,s=0;e>i;i++,s++)o[s]=n[i];return o.buffer}},{}],12:[function(n,t,o){!function(){'use strict';for(var s='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/',a=new Uint8Array(256),e=0;e<s.length;e++)a[s.charCodeAt(e)]=e;o.encode=function(t){var e,r=new Uint8Array(t),n=r.length,o='';for(e=0;n>e;e+=3)o+=s[r[e]>>2],o+=s[(3&r[e])<<4|r[e+1]>>4],o+=s[(15&r[e+1])<<2|r[e+2]>>6],o+=s[63&r[e+2]];return 2==n%3?o=o.substring(0,o.length-1)+'=':1==n%3&&(o=o.substring(0,o.length-2)+'=='),o},o.decode=function(e){var t,r,n,o,i,s=.75*e.length,d=e.length,c=0;'='===e[e.length-1]&&(s--,'='===e[e.length-2]&&s--);var l=new ArrayBuffer(s),p=new Uint8Array(l);for(t=0;d>t;t+=4)r=a[e.charCodeAt(t)],n=a[e.charCodeAt(t+1)],o=a[e.charCodeAt(t+2)],i=a[e.charCodeAt(t+3)],p[c++]=r<<2|n>>4,p[c++]=(15&n)<<4|o>>2,p[c++]=(3&o)<<6|63&i;return l}}()},{}],13:[function(n,p){(function(e){function d(s){for(var t,a=0;a<s.length;a++)if(t=s[a],t.buffer instanceof ArrayBuffer){var e=t.buffer;if(t.byteLength!==e.byteLength){var n=new Uint8Array(t.byteLength);n.set(new Uint8Array(e,t.byteOffset,t.byteLength)),e=n.buffer}s[a]=e}}function t(s,t){t=t||{};var e=new r;d(s);for(var a=0;a<s.length;a++)e.append(s[a]);return t.type?e.getBlob(t.type):e.getBlob()}function n(n,t){return d(n),new Blob(n,t||{})}var r=e.BlobBuilder||e.WebKitBlobBuilder||e.MSBlobBuilder||e.MozBlobBuilder,o=function(){try{var e=new Blob(['hi']);return 2===e.size}catch(t){return!1}}(),s=o&&function(){try{var e=new Blob([new Uint8Array([1,2])]);return 2===e.size}catch(t){return!1}}(),a=r&&r.prototype.append&&r.prototype.getBlob;p.exports=function(){return o?s?e.Blob:n:a?t:void 0}()}).call(this,'undefined'==typeof self?'undefined'==typeof window?{}:window:self)},{}],14:[function(r,t){function s(e){return e?n(e):void 0}function n(n){for(var t in s.prototype)n[t]=s.prototype[t];return n}'undefined'!=typeof t&&(t.exports=s),s.prototype.on=s.prototype.addEventListener=function(n,t){return this._callbacks=this._callbacks||{},(this._callbacks['$'+n]=this._callbacks['$'+n]||[]).push(t),this},s.prototype.once=function(n,t){function e(){this.off(n,e),t.apply(this,arguments)}return e.fn=t,this.on(n,e),this},s.prototype.off=s.prototype.removeListener=s.prototype.removeAllListeners=s.prototype.removeEventListener=function(s,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var e=this._callbacks['$'+s];if(!e)return this;if(1==arguments.length)return delete this._callbacks['$'+s],this;for(var a,n=0;n<e.length;n++)if(a=e[n],a===t||a.fn===t){e.splice(n,1);break}return this},s.prototype.emit=function(s){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),e=this._callbacks['$'+s];if(e){e=e.slice(0);for(var r=0,n=e.length;n>r;++r)e[r].apply(this,t)}return this},s.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks['$'+e]||[]},s.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}],15:[function(n,t){t.exports=function(n,t){var e=function(){};e.prototype=t.prototype,n.prototype=new e,n.prototype.constructor=n}},{}],16:[function(_,t,k){(function(S){function e(r,t){var e='b'+k.packets[r.type]+r.data.data;return t(e)}function n(r,t,p){if(!t)return k.encodeBase64Packet(r,p);var n=r.data,c=new Uint8Array(n),i=new Uint8Array(1+n.byteLength);i[0]=y[r.type];for(var s=0;s<c.length;s++)i[s+1]=c[s];return p(i.buffer)}function r(r,t,s){if(!t)return k.encodeBase64Packet(r,s);var n=new FileReader;return n.onload=function(){r.data=n.result,k.encodePacket(r,t,!0,s)},n.readAsArrayBuffer(r.data)}function o(a,t,i){if(!t)return k.encodeBase64Packet(a,i);if(m)return r(a,t,i);var n=new Uint8Array(1);n[0]=y[a.type];var o=new b([n.buffer,a.data]);return i(o)}function T(e){try{e=l.decode(e,{strict:!1})}catch(t){return!1}return e}function a(a,c,e){for(var d=Array(a.length),t=p(a.length,e),n=function(n,e,t){c(e,function(o,e){d[n]=e,t(o,d)})},r=0;r<a.length;r++)n(r,a[r],t)}var s,t=_('./keys'),i=_('has-binary2'),h=_('arraybuffer.slice'),p=_('after'),l=_('./utf8');S&&S.ArrayBuffer&&(s=_('base64-arraybuffer'));var c='undefined'!=typeof navigator&&/Android/i.test(navigator.userAgent),d='undefined'!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),m=c||d;k.protocol=3;var y=k.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},g=t(y),w={type:'error',data:'parser error'},b=_('blob');k.encodePacket=function(s,t,p,d){'function'==typeof t&&(d=t,t=!1),'function'==typeof p&&(d=p,p=null);var a=void 0===s.data?void 0:s.data.buffer||s.data;if(S.ArrayBuffer&&a instanceof ArrayBuffer)return n(s,t,d);if(b&&a instanceof S.Blob)return o(s,t,d);if(a&&a.base64)return e(s,d);var c=y[s.type];return void 0!==s.data&&(c+=p?l.encode(s.data+'',{strict:!1}):s.data+''),d(''+c)},k.encodeBase64Packet=function(e,r){var n='b'+k.packets[e.type];if(b&&e.data instanceof S.Blob){var o=new FileReader;return o.onload=function(){var e=o.result.split(',')[1];r(n+e)},o.readAsDataURL(e.data)}var t;try{t=f.apply(null,new Uint8Array(e.data))}catch(n){for(var s=new Uint8Array(e.data),a=Array(s.length),i=0;i<s.length;i++)a[i]=s[i];t=f.apply(null,a)}return n+=S.btoa(t),r(n)},k.decodePacket=function(r,a,e){if(void 0===r)return w;if('string'==typeof r){if('b'===r.charAt(0))return k.decodeBase64Packet(r.substr(1),a);if(e&&(r=T(r),!1===r))return w;var n=r.charAt(0);return+n==n&&g[n]?1<r.length?{type:g[n],data:r.substring(1)}:{type:g[n]}:w}var p=new Uint8Array(r),n=p[0],i=h(r,1);return b&&'blob'===a&&(i=new b([i])),{type:g[n],data:i}},k.decodeBase64Packet=function(o,t){var e=g[o.charAt(0)];if(!s)return{type:e,data:{base64:!0,data:o.substr(1)}};var a=s.decode(o.substr(1));return'blob'===t&&b&&(a=new b([a])),{type:e,data:a}},k.encodePayload=function(r,p,c){function d(e){return e.length+':'+e}'function'==typeof p&&(c=p,p=null);var o=i(r);return p&&o?b&&!m?k.encodePayloadAsBlob(r,c):k.encodePayloadAsArrayBuffer(r,c):r.length?void a(r,function(e,r){k.encodePacket(e,!!o&&p,!1,function(e){r(null,d(e))})},function(n,t){return c(t.join(''))}):c('0:')},k.decodePayload=function(r,a,d,m){if('string'!=typeof r)return k.decodePayloadAsBinary(r,a,m);'function'==typeof a&&(m=a,a=null),'function'==typeof d&&(m=d,d=null);var o;if(''===r)return m(w,0,1);if(d&&(r=T(r),!1===r))return m(w,0,1);for(var i,s,c,f='',y=0,p=r.length;p>y;y++)if(c=r.charAt(y),':'===c){if(''==f||f!=(i=+f))return m(w,0,1);if(s=r.substr(y+1,i),f!=s.length)return m(w,0,1);if(s.length){if(o=k.decodePacket(s,a,!1),w.type===o.type&&w.data===o.data)return m(w,0,1);var h=m(o,y+i,p);if(!1===h)return}y+=i,f=''}else f+=c;return''===f?void 0:m(w,0,1)},k.encodePayloadAsArrayBuffer=function(n,s){return n.length?void a(n,function(n,r){k.encodePacket(n,!0,!0,function(e){return r(null,e)})},function(e,t){var r=t.reduce(function(n,t){var o;return o='string'==typeof t?t.length:t.byteLength,n+o.toString().length+o+2},0),p=new Uint8Array(r),o=0;return t.forEach(function(i){var c='string'==typeof i,e=i;if(c){for(var r=new Uint8Array(i.length),n=0;n<i.length;n++)r[n]=i.charCodeAt(n);e=r.buffer}p[o++]=c?0:1;for(var s=e.byteLength.toString(),n=0;n<s.length;n++)p[o++]=parseInt(s[n]);p[o++]=255;for(var r=new Uint8Array(e),n=0;n<r.length;n++)p[o++]=r[n]}),s(p.buffer)}):s(new ArrayBuffer(0))},k.encodePayloadAsBlob=function(n,o){a(n,function(n,o){k.encodePacket(n,!0,!0,function(e){var p=new Uint8Array(1);if(p[0]=1,'string'==typeof e){for(var r=new Uint8Array(e.length),n=0;n<e.length;n++)r[n]=e.charCodeAt(n);e=r.buffer,p[0]=0}for(var d=e instanceof ArrayBuffer?e.byteLength:e.size,i=d.toString(),s=new Uint8Array(i.length+1),n=0;n<i.length;n++)s[n]=parseInt(i[n]);if(s[i.length]=255,b){var a=new b([p.buffer,s.buffer,e]);o(null,a)}})},function(e,t){return o(new b(t))})},k.decodePayloadAsBinary=function(r,m,y){'function'==typeof m&&(y=m,m=null);for(var t=r,n=[];0<t.byteLength;){for(var o=new Uint8Array(t),s=0===o[0],a='',i=1;255!==o[i];i++){if(310<a.length)return y(w,0,1);a+=o[i]}t=h(t,2+a.length),a=parseInt(a);var c=h(t,0,a);if(s)try{c=f.apply(null,new Uint8Array(c))}catch(e){var p=new Uint8Array(c);c='';for(var i=0;i<p.length;i++)c+=f(p[i])}n.push(c),t=h(t,a)}var l=n.length;n.forEach(function(e,t){y(k.decodePacket(e,m,!0),t,l)})}}).call(this,'undefined'==typeof self?'undefined'==typeof window?{}:window:self)},{"./keys":17,"./utf8":18,after:10,"arraybuffer.slice":11,"base64-arraybuffer":12,blob:13,"has-binary2":19}],17:[function(n,t){t.exports=Object.keys||function(o){var t=[],e=Object.prototype.hasOwnProperty;for(var r in o)e.call(o,r)&&t.push(r);return t}},{}],18:[function(n,u,x){(function(_){!function(T){function P(s){for(var t,e,r=[],n=0,a=s.length;a>n;)t=s.charCodeAt(n++),55296<=t&&56319>=t&&a>n?(e=s.charCodeAt(n++),56320==(64512&e)?r.push(((1023&t)<<10)+(1023&e)+65536):(r.push(t),n--)):r.push(t);return r}function o(s){for(var t,e=s.length,r=-1,n='';++r<e;)t=s[r],65535<t&&(t-=65536,n+=y(55296|1023&t>>>10),t=56320|1023&t),n+=y(t);return n}function E(n,t){if(55296<=n&&57343>=n){if(t)throw Error('Lone surrogate U+'+n.toString(16).toUpperCase()+' is not a scalar value');return!1}return!0}function n(n,t){return y(128|63&n>>t)}function C(o,t){if(0==(4294967168&o))return y(o);var e='';return 0==(4294965248&o)?e=y(192|31&o>>6):0==(4294901760&o)?(E(o,t)||(o=65533),e=y(224|15&o>>12),e+=n(o,6)):0==(4292870144&o)&&(e=y(240|7&o>>18),e+=n(o,12),e+=n(o,6)),e+=y(128|63&o)}function s(){if(m>=l)throw Error('Invalid byte index');var e=255&d[m];if(m++,128==(192&e))return 63&e;throw Error('Invalid continuation byte')}function a(a){var t,e,r,n,o;if(m>l)throw Error('Invalid byte index');if(m==l)return!1;if(t=255&d[m],m++,0==(128&t))return t;if(192==(224&t)){if(e=s(),o=(31&t)<<6|e,128<=o)return o;throw Error('Invalid continuation byte')}if(224==(240&t)){if(e=s(),r=s(),o=(15&t)<<12|e<<6|r,2048<=o)return E(o,a)?o:65533;throw Error('Invalid continuation byte')}if(240==(248&t)&&(e=s(),r=s(),n=s(),o=(7&t)<<18|e<<12|r<<6|n,65536<=o&&1114111>=o))return o;throw Error('Invalid UTF-8 detected')}var i='object'==typeof x&&x,p='object'==typeof u&&u&&u.exports==i&&u,c='object'==typeof _&&_;(c.global===c||c.window===c)&&(T=c);var d,l,m,y=f,h={version:'2.1.2',encode:function(o,t){t=t||{};for(var e,r=!1!==t.strict,n=P(o),i=n.length,s=-1,a='';++s<i;)e=n[s],a+=C(e,r);return a},decode:function(i,t){t=t||{};var e=!1!==t.strict;d=P(i),l=d.length,m=0;for(var r,n=[];!1!==(r=a(e));)n.push(r);return o(n)}};if(!(i&&!i.nodeType))T.utf8=h;else if(p)p.exports=h;else{var g={}.hasOwnProperty;for(var v in h)g.call(h,v)&&(i[v]=h[v])}}(this)}).call(this,'undefined'==typeof self?'undefined'==typeof window?{}:window:self)},{}],19:[function(s,t){(function(a){function r(o){if(!o||'object'!=typeof o)return!1;if(n(o)){for(var p=0,e=o.length;e>p;p++)if(r(o[p]))return!0;return!1}if('function'==typeof a.Buffer&&a.Buffer.isBuffer&&a.Buffer.isBuffer(o)||'function'==typeof a.ArrayBuffer&&o instanceof ArrayBuffer||'function'==typeof a.Blob&&o instanceof Blob||'function'==typeof a.File&&o instanceof File)return!0;if(o.toJSON&&'function'==typeof o.toJSON&&1===arguments.length)return r(o.toJSON(),!0);for(var i in o)if(Object.prototype.hasOwnProperty.call(o,i)&&r(o[i]))return!0;return!1}var n=s('isarray');t.exports=r}).call(this,'undefined'==typeof self?'undefined'==typeof window?{}:window:self)},{isarray:22}],20:[function(n,t){try{t.exports='undefined'!=typeof XMLHttpRequest&&'withCredentials'in new XMLHttpRequest}catch(e){t.exports=!1}},{}],21:[function(r,t){var o=[].indexOf;t.exports=function(n,t){if(o)return n.indexOf(t);for(var e=0;e<n.length;++e)if(n[e]===t)return e;return-1}},{}],22:[function(r,t){var e={}.toString;t.exports=Array.isArray||function(n){return'[object Array]'==e.call(n)}},{}],23:[function(n,p){(function(c){var t=/^[\],:{}\s]*$/,r=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,n=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,o=/(?:^|:|,)(?:\s*\[)+/g,i=/^\s+/,s=/\s+$/;p.exports=function(a){return'string'==typeof a&&a?(a=a.replace(i,'').replace(s,''),c.JSON&&JSON.parse?JSON.parse(a):t.test(a.replace(r,'@').replace(n,']').replace(o,''))?new Function('return '+a)():void 0):null}}).call(this,'undefined'==typeof self?'undefined'==typeof window?{}:window:self)},{}],24:[function(n,t,e){e.encode=function(n){var t='';for(var e in n)n.hasOwnProperty(e)&&(t.length&&(t+='&'),t+=encodeURIComponent(e)+'='+encodeURIComponent(n[e]));return t},e.decode=function(s){for(var t,a={},e=s.split('&'),r=0,n=e.length;n>r;r++)t=e[r].split('='),a[decodeURIComponent(t[0])]=decodeURIComponent(t[1]);return a}},{}],25:[function(r,t){var e=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,n=['source','protocol','authority','userInfo','user','password','host','port','relative','path','directory','file','query','anchor'];t.exports=function(o){var t=o,p=o.indexOf('['),r=o.indexOf(']');-1!=p&&-1!=r&&(o=o.substring(0,p)+o.substring(p,r).replace(/:/g,';')+o.substring(r,o.length));for(var i=e.exec(o||''),s={},a=14;a--;)s[n[a]]=i[a]||'';return-1!=p&&-1!=r&&(s.source=t,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,':'),s.authority=s.authority.replace('[','').replace(']','').replace(/;/g,':'),s.ipv6uri=!0),s}},{}],26:[function(r,t){'use strict';function e(r){var t='';do t=s[r%a]+t,r=n(r/a);while(0<r);return t}function o(){var n=e(+new Date);return n===i?n+'.'+e(d++):(d=0,i=n)}for(var i,s=['0','1','2','3','4','5','6','7','8','9','A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z','a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z','-','_'],a=64,c={},d=0,p=0;a>p;p++)c[s[p]]=p;o.encode=e,o.decode=function(n){var t=0;for(p=0;p<n.length;p++)t=t*a+c[n.charAt(p)];return t},t.exports=o},{}],27:[function(n,t){t.exports=n('./lib/index')},{"./lib/index":1}]},{},[27])(27)})}])}).call(a,i(1).clearImmediate,i(1).setImmediate,i(0))},function(e,t,n){(function(e,t){(function(e){'use strict';function n(e){'function'!=typeof e&&(e=new Function(''+e));for(var t=Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return f[m]=r,u(m),m++}function r(e){delete f[e]}function o(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n);}}function s(e){if(y)setTimeout(s,0,e);else{var t=f[e];if(t){y=!0;try{o(t)}finally{r(e),y=!1}}}}function a(){u=function(e){t.nextTick(function(){s(e)})}}function i(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage('','*'),e.onmessage=n,t}}function p(){var t='setImmediate$'+Math.random()+'$',n=function(n){n.source===e&&'string'==typeof n.data&&0===n.data.indexOf(t)&&s(+n.data.slice(t.length))};e.addEventListener?e.addEventListener('message',n,!1):e.attachEvent('onmessage',n),u=function(n){e.postMessage(t+n,'*')}}function c(){var e=new MessageChannel;e.port1.onmessage=function(e){var t=e.data;s(t)},u=function(t){e.port2.postMessage(t)}}function d(){var e=h.documentElement;u=function(t){var n=h.createElement('script');n.onreadystatechange=function(){s(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}function l(){u=function(e){setTimeout(s,0,e)}}if(!e.setImmediate){var u,m=1,f={},y=!1,h=e.document,g=Object.getPrototypeOf&&Object.getPrototypeOf(e);g=g&&g.setTimeout?g:e,'[object process]'==={}.toString.call(e.process)?a():i()?p():e.MessageChannel?c():h&&'onreadystatechange'in h.createElement('script')?d():l(),g.setImmediate=n,g.clearImmediate=r}})('undefined'==typeof self?'undefined'==typeof e?this:e:self)}).call(t,n(0),n(6))},function(e){function t(){throw new Error('setTimeout has not been defined')}function n(){throw new Error('clearTimeout has not been defined')}function r(e){if(c===setTimeout)return setTimeout(e,0);if((c===t||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function o(e){if(d===clearTimeout)return clearTimeout(e);if((d===n||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}function s(){f&&u&&(f=!1,u.length?m=u.concat(m):y=-1,m.length&&a())}function a(){if(!f){var e=r(s);f=!0;for(var t=m.length;t;){for(u=m,m=[];++y<t;)u&&u[y].run();y=-1,t=m.length}u=null,f=!1,o(e)}}function p(e,t){this.fun=e,this.array=t}function i(){}var c,d,l=e.exports={};(function(){try{c='function'==typeof setTimeout?setTimeout:t}catch(n){c=t}try{d='function'==typeof clearTimeout?clearTimeout:n}catch(t){d=n}})();var u,m=[],f=!1,y=-1;l.nextTick=function(e){var t=Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];m.push(new p(e,t)),1!==m.length||f||r(a)},p.prototype.run=function(){this.fun.apply(null,this.array)},l.title='browser',l.browser=!0,l.env={},l.argv=[],l.version='',l.versions={},l.on=i,l.addListener=i,l.once=i,l.off=i,l.removeListener=i,l.removeAllListeners=i,l.emit=i,l.prependListener=i,l.prependOnceListener=i,l.listeners=function(){return[]},l.binding=function(){throw new Error('process.binding is not supported')},l.cwd=function(){return'/'},l.chdir=function(){throw new Error('process.chdir is not supported')},l.umask=function(){return 0}},function(e,t,n){(function(t){var n;n='undefined'==typeof window?'undefined'==typeof t?'undefined'==typeof self?{}:self:t:window,e.exports=n}).call(t,n(0))},function(e,t){(function(t){e.exports=t}).call(t,{})},function(e,t,n){'use strict';var r=Math.floor;const o=n(10);e.exports=class extends o{constructor(e='irc.irc7.com',t=6667,o=!1){if(super(),'string'!=typeof e)throw new TypeError('hostname should be of type string');else if('number'!=typeof t)throw new TypeError('port should be of type number');else if('boolean'!=typeof o)throw new TypeError('useTLS should be of type boolean');this.client=this.c={away:!1,connectionState:0,debug:!1,me:'Guest_'+r(4294967295*Math.random()+1).toString(16),port:t,realName:`ircJS v${n(2).version} by JD`,server:null,serverTarget:e,ssl:o,userName:'IRCSock',_versionString:`ircJS v${n(2).version} by JD`},this.event=this.e={address:null,chan:null,event:null,fullAddress:null,nick:null,numeric:null,rawMsg:null,site:null,target:null},this._incomingBuffer='',this.emit('start')}connect(e){if('function'==typeof e)this.on('connect',e);else if('undefined'!=typeof e)throw new TypeError('callback should be of type function')}ctcp(e,t){this.msg(e,`\x01${t}\x01`)}ctcpReply(e,t){this.notice(e,`\x01${t}\x01`)}describe(e,t){this.ctcp(e,`ACTION ${t}`)}parsePrefix(e){const[t,n,r,o,s]=e.match(/^([^!@\$]+?)(?:!([^!@$]+?))?(?:@([^!@$]+?))?(?:\$([^!@$]+?))?$/);return{source:t,name:n,user:r,host:o,server:s}}msg(e,t){this.send(`PRIVMSG ${e} :${t}`)}notice(e,t){this.send(`NOTICE ${e} :${t}`)}send(e=''){if('string'!=typeof e)throw new TypeError('data should be of type string');!0===this.debug&&console.log(`--> ${e}`)}setNickname(e){if('string'!=typeof e)throw new TypeError('nickname should be of type string');e=e.split('').map((e)=>{return'?'===e?r(10*Math.random()):e}).join(''),-1===[0,3].indexOf(this.connectionState)?this.send(`NICK ${e}`):this.client.me=e}showDebug(e=!1){if('boolean'!=typeof e)throw new TypeError('debugEnabled should be of type boolean');this.debug=e}_setHandlers(){this.on('connect',(e)=>{this.client.server=this.hostname,this.connectionState=1,e.send(`IRCVERS IRC8 ircJS en-us :${this.client._versionString}`),this.send(`USER ${this.client.userName} - - :${this.client.realName}`),this.send(`NICK ${this.client.me}`)}),this.on('CTCP',(e,t)=>{'PING'===e&&this.ctcpReply(this.event.nick,`${e} ${t}`),''===t&&('TIME'===e?this.ctcpReply(this.event.nick,`${e} ${new Date}`):'VERSION'===e&&this.ctcpReply(this.event.nick,`${e} ${this.client._versionString}`))}),this.on('data',(e)=>{const t=(this._incomingBuffer+e).split('\r').join('\n').split('\n');this._incomingBuffer=t.pop();for(const n of t)''!==n&&this.emit('line',n)}),this.on('disconnect',()=>{this.connectionState=0}),this.on('line',(e)=>{!0===this.debug&&console.log(`<-- ${e}`);const t=e.split(' '),n={params:[],source:e};for(let[r,o]of t.entries())if(''!==o){if('undefined'==typeof n.tags)if('@'===o[0]&&2<=o.length){n.tags=o.substr(1).split(';');continue}else n.tags=null;if('undefined'==typeof n.prefix)if(':'===o[0]&&2<=o.length){const e=n.prefix=this.parsePrefix(o.substr(1));this.event.nick=e.name,e.user&&(this.event.site=e.host,this.event.address=`${e.user}@{ pfx.host }`,this.event.fullAddress=`${e.name}!${this.event.address}`);continue}else n.prefix=this.client.server;if('undefined'==typeof n.command){if(!0===/^([a-zA-Z]+|[0-9]{3})$/.test(o))n.command=o.toUpperCase();else break;}else if(':'!==o[0])n.params.push(o);else{n.params.push(t.slice(r).join(' ').substr(1));break}}'undefined'==typeof n.command?this.emit('parseError',e):this.emit('parsedLine',n),this.event.nick=this.event.site=this.event.address=this.event.fullAddress=null}),this.on('parsedLine',(e)=>{const t=e.command.toUpperCase();if(this.event.rawMsg=e.source,-1!==['JOIN'].indexOf(t)){let t,[n]=e.params;1<e.params.length&&([t,n]=e.params),this.event.target=n,this.emit('JOIN',t),this.event.target=null}else if('AUTH'===t){const[n,r,o]=e.params;this.emit(t,r,o)}else if(-1!==['NOTICE','PRIVMSG'].indexOf(t)){const[n,r]=e.params;if(this.event.target=n,1===r.charCodeAt(0)&&1===r.charCodeAt(r.length-1)&&3<r.length){const e='PRIVMSG'===t?'CTCP':'CTCPREPLY';let n=r.substr(1,r.length-2).split(' ');const o=n.shift().toUpperCase(),s=n.join(' ');'ACTION'===o?this.emit(o,s):this.emit(e,o,s)}else this.emit(t,r);this.event.target=null}else if(-1!==['ERROR','NICK','PING','QUIT','WALLOPS'].indexOf(t)){const[n]=e.params;this.emit(t,n)}else if(-1!==['INVITE','TOPIC','KILL','PART'].indexOf(t)){const[n,r]=e.params;this.event.target=n,this.emit(t,r),this.event.target=null}else if('MODE'===t){const[n,...r]=e.params;this.event.target=n,this.emit(t,r.join(' ')),this.event.target=null}else if('PROP'===t){const[n,r,o]=e.params;this.event.target=n,this.emit(t,r,o),this.event.target=null}else if(-1!==['KICK','WHISPER'].indexOf(t)){const[n,r,o]=e.params;this.event.target=r,this.emit(t,n,o),this.event.target=null}else!0===/^[0-9]{3}$/.test(t)?(this.event.target=e.params[0],this.event.numeric=t,this.emit(`raw ${t}`,e),this.event.target=this.event.numeric=null):this.emit(`raw ${t}`,e);this.event.rawMsg=null}),this.on('raw 001',(e)=>{this.connectionState=2,this.client.me=this.event.target,this.client.server=e.prefix.name}),this.on('PING',(e)=>this.send(`PONG :${e}`)),this.on('NICK',(e)=>{this.event.nick===this.client.me&&(this.client.me=e)})}}},function(e){'use strict';function t(){}function n(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function r(){this._events=new t,this._eventsCount=0}var o=Object.prototype.hasOwnProperty,s='~';Object.create&&(t.prototype=Object.create(null),!new t().__proto__&&(s=!1)),r.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)o.call(e,t)&&n.push(s?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},r.prototype.listeners=function(e,t){var n=s?s+e:e,r=this._events[n];if(t)return!!r;if(!r)return[];if(r.fn)return[r.fn];for(var o=0,a=r.length,i=Array(a);o<a;o++)i[o]=r[o].fn;return i},r.prototype.emit=function(e,t,n,r,o,a){var p=s?s+e:e;if(!this._events[p])return!1;var c,d,i=this._events[p],l=arguments.length;if(i.fn){switch(i.once&&this.removeListener(e,i.fn,void 0,!0),l){case 1:return i.fn.call(i.context),!0;case 2:return i.fn.call(i.context,t),!0;case 3:return i.fn.call(i.context,t,n),!0;case 4:return i.fn.call(i.context,t,n,r),!0;case 5:return i.fn.call(i.context,t,n,r,o),!0;case 6:return i.fn.call(i.context,t,n,r,o,a),!0;}for(d=1,c=Array(l-1);d<l;d++)c[d-1]=arguments[d];i.fn.apply(i.context,c)}else{var u,m=i.length;for(d=0;d<m;d++)switch(i[d].once&&this.removeListener(e,i[d].fn,void 0,!0),l){case 1:i[d].fn.call(i[d].context);break;case 2:i[d].fn.call(i[d].context,t);break;case 3:i[d].fn.call(i[d].context,t,n);break;case 4:i[d].fn.call(i[d].context,t,n,r);break;default:if(!c)for(u=1,c=Array(l-1);u<l;u++)c[u-1]=arguments[u];i[d].fn.apply(i[d].context,c);}}return!0},r.prototype.on=function(e,t,r){var o=new n(t,r||this),a=s?s+e:e;return this._events[a]?this._events[a].fn?this._events[a]=[this._events[a],o]:this._events[a].push(o):(this._events[a]=o,this._eventsCount++),this},r.prototype.once=function(e,t,r){var o=new n(t,r||this,!0),a=s?s+e:e;return this._events[a]?this._events[a].fn?this._events[a]=[this._events[a],o]:this._events[a].push(o):(this._events[a]=o,this._eventsCount++),this},r.prototype.removeListener=function(e,n,r,o){var a=s?s+e:e;if(!this._events[a])return this;if(!n)return 0==--this._eventsCount?this._events=new t:delete this._events[a],this;var p=this._events[a];if(p.fn)p.fn!==n||o&&!p.once||r&&p.context!==r||(0==--this._eventsCount?this._events=new t:delete this._events[a]);else{for(var c=0,i=[],d=p.length;c<d;c++)(p[c].fn!==n||o&&!p[c].once||r&&p[c].context!==r)&&i.push(p[c]);i.length?this._events[a]=1===i.length?i[0]:i:0==--this._eventsCount?this._events=new t:delete this._events[a]}return this},r.prototype.removeAllListeners=function(e){var n;return e?(n=s?s+e:e,this._events[n]&&(0==--this._eventsCount?this._events=new t:delete this._events[n])):(this._events=new t,this._eventsCount=0),this},r.prototype.off=r.prototype.removeListener,r.prototype.addListener=r.prototype.on,r.prototype.setMaxListeners=function(){return this},r.prefixed=s,r.EventEmitter=r,e.exports=r}]);